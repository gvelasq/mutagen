<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Extensions to dplyr's mutate • mutagen</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Extensions to dplyr's mutate">
<meta name="description" content="Extensions to dplyr's mutate.">
<meta property="og:description" content="Extensions to dplyr's mutate.">
<meta property="og:image" content="https://gvelasq.github.io/mutagen/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">mutagen</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gvelasq/mutagen/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="mutagen-">mutagen <a class="anchor" aria-label="anchor" href="#mutagen-"></a>
</h1>
</div>
<blockquote>
<p>The issue is of human time rather than silicon chip time. Human time can be wasted by taking longer to write the code, and (often much more importantly) by taking more time to understand subsequently what it does.</p>
<p>– <a href="https://www.burns-stat.com/documents/books/the-r-inferno" class="external-link"><em>The R Inferno</em></a> <em>(Patrick Burns, 2011)</em></p>
</blockquote>
<hr>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of mutagen is to provide extensions to dplyr’s <a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link"><code>mutate()</code></a>.</p>
<p>mutagen provides simple-to-use functions as alternatives to complex R idioms for variable generation. Some mutagen functions are specific to problems encountered in R (e.g., working with list-columns in a data frame), while others solve more generic data science operations that are inspired by the excellent set of <a href="https://www.stata.com/manuals/degen.pdf" class="external-link"><code>egen</code></a> (‘<strong>e</strong>xtensions to <strong>gen</strong>erate’) and <a href="https://ideas.repec.org/c/boc/bocode/s386401.html" class="external-link"><code>egenmore</code></a> functions in Stata.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of mutagen from <a href="https://github.com" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"gvelasq/mutagen"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>mutagen functions begin with the prefix <code>gen_*</code> and are designed to be used inside dplyr’s <code>mutate()</code>. A mnemonic for this is that to use mutagen, first <strong>muta</strong>te then <strong>gen</strong>erate.</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>mutagen function</th>
<th>R idiom<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The code shown in this column is pseudocode.&lt;/p&gt;"><sup>1</sup></a>
</th>
<th>Stata function</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code><a href="reference/gen_na_listcol.html">gen_na_listcol()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>2</sup></a>
</td>
<td><code>modify_tree(leaf = \(x) replace(x, is.null(x), NA))</code></td>
<td><code>N/A</code></td>
</tr>
<tr class="even">
<td><code><a href="reference/gen_percent.html">gen_percent()</a></code></td>
<td><code>mutate(data, pct = col / sum(col) * 100, .by = group_cols)</code></td>
<td><code>egen pc()</code></td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/gen_rowall.html">gen_rowall()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>3</sup></a>
</td>
<td><code>pmap_int(data, \(cols) all(list(cols) %in% values))</code></td>
<td><code>egenmore rall()</code></td>
</tr>
<tr class="even">
<td>
<code><a href="reference/gen_rowany.html">gen_rowany()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>4</sup></a>
</td>
<td><code>pmap_int(data, \(cols) any(list(cols) %in% values))</code></td>
<td>
<code>egen anymatch()</code>, <code>egenmore rany()</code>
</td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/gen_rowcount.html">gen_rowcount()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>5</sup></a>
</td>
<td><code>pmap_int(data, \(cols) sum(list(cols) %in% values))</code></td>
<td>
<code>egen anycount()</code>, <code>egenmore rcount()</code>
</td>
</tr>
<tr class="even">
<td>
<code><a href="reference/gen_rowfirst.html">gen_rowfirst()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>6</sup></a>
</td>
<td><code>pmap_vec(data, \(cols) first(c(cols), na_rm = TRUE))</code></td>
<td><code>egen rowfirst()</code></td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/gen_rowlast.html">gen_rowlast()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>7</sup></a>
</td>
<td><code>pmap_vec(data, \(cols) last(c(cols), na_rm = TRUE))</code></td>
<td><code>egen rowlast()</code></td>
</tr>
<tr class="even">
<td><code><a href="reference/gen_rowmax.html">gen_rowmax()</a></code></td>
<td><code>inject(pmax(!!!data, na.rm = TRUE))</code></td>
<td><code>egen rowmax()</code></td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/gen_rowmean.html">gen_rowmean()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>8</sup></a>
</td>
<td><code>pmap_dbl(data, \(cols) mean(c(cols), na.rm = TRUE))</code></td>
<td><code>egen rowmean()</code></td>
</tr>
<tr class="even">
<td>
<code><a href="reference/gen_rowmedian.html">gen_rowmedian()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>9</sup></a>
</td>
<td><code>pmap_dbl(data, \(cols) median(c(cols), na.rm = TRUE))</code></td>
<td><code>egen rowmedian()</code></td>
</tr>
<tr class="odd">
<td><code><a href="reference/gen_rowmin.html">gen_rowmin()</a></code></td>
<td><code>inject(pmin(!!!data, na.rm = TRUE))</code></td>
<td><code>egen rowmin()</code></td>
</tr>
<tr class="even">
<td>
<code><a href="reference/gen_rowmiss.html">gen_rowmiss()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>10</sup></a>
</td>
<td><code>pmap_int(data, \(cols) sum(!complete.cases(c(cols))))</code></td>
<td><code>egen rowmiss()</code></td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/gen_rownonmiss.html">gen_rownonmiss()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>11</sup></a>
</td>
<td><code>pmap_int(data, \(cols) sum(complete.cases(c(cols))))</code></td>
<td><code>egen rownonmiss()</code></td>
</tr>
<tr class="even">
<td>
<code><a href="reference/gen_rownth.html">gen_rownth()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>12</sup></a>
</td>
<td><code>pmap_vec(data, \(cols) nth(c(cols), n, na_rm = TRUE))</code></td>
<td><code>N/A</code></td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/gen_rowsum.html">gen_rowsum()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>13</sup></a>
</td>
<td><code>pmap_vec(data, \(cols) sum(cols, na.rm = TRUE))</code></td>
<td><code>egen rowtotal(), egenmore rsum2()</code></td>
</tr>
<tr class="even">
<td>
<code><a href="reference/gen_rowsd.html">gen_rowsd()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Parallelization is supported via &lt;a href="https://purrr.tidyverse.org/reference/in_parallel.html" class="external-link"&gt;purrr::in_parallel()&lt;/a&gt;.&lt;/p&gt;'><sup>14</sup></a>
</td>
<td><code>pmap_dbl(data, \(cols) sd(c(cols), na.rm = TRUE))</code></td>
<td><code>egen rowsd()</code></td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>Please note that the mutagen project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div class="section level2">
<h2 id="contributors">Contributors<a class="anchor" aria-label="anchor" href="#contributors"></a>
</h2>
<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore-start -->
<!-- markdownlint-disable -->
<p>All contributions to this project are gratefully acknowledged using the <a href="https://github.com/ropensci/allcontributors" class="external-link"><code>allcontributors</code> package</a> following the <a href="https://allcontributors.org" class="external-link">all-contributors</a> specification. Contributions of any kind are welcome!</p>
<div class="section level3">
<h3 id="code">Code<a class="anchor" aria-label="anchor" href="#code"></a>
</h3>
<table class="table"><tr>
<td align="center">
<a href="https://github.com/gvelasq" class="external-link"> <img src="https://avatars.githubusercontent.com/u/20712598?v=4" width="100px;" alt=""></a><br><a href="https://github.com/gvelasq/mutagen/commits?author=gvelasq" class="external-link">gvelasq</a>
</td>
<td align="center">
<a href="https://github.com/ivelasq" class="external-link"> <img src="https://avatars.githubusercontent.com/u/12236152?v=4" width="100px;" alt=""></a><br><a href="https://github.com/gvelasq/mutagen/commits?author=ivelasq" class="external-link">ivelasq</a>
</td>
</tr></table>
</div>
<div class="section level3">
<h3 id="issues">Issues<a class="anchor" aria-label="anchor" href="#issues"></a>
</h3>
<table class="table"><tr>
<td align="center">
<a href="https://github.com/delabj" class="external-link"> <img src="https://avatars.githubusercontent.com/u/46408036?u=67d80ea79824db5bf26e27d553294c48655965c6&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/gvelasq/mutagen/issues?q=is%3Aissue+author%3Adelabj" class="external-link">delabj</a>
</td>
<td align="center">
<a href="https://github.com/thomascwells" class="external-link"> <img src="https://avatars.githubusercontent.com/u/15213768?u=8878e3801c79df2745b97e78561e37022039324c&amp;v=4" width="100px;" alt=""></a><br><a href="https://github.com/gvelasq/mutagen/issues?q=is%3Aissue+author%3Athomascwells" class="external-link">thomascwells</a>
</td>
</tr></table>
<!-- markdownlint-enable --><!-- prettier-ignore-end --><!-- ALL-CONTRIBUTORS-LIST:END -->
</div>
</div>
</div>


  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/gvelasq/mutagen/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/gvelasq/mutagen/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
<li><a href="SUPPORT.html">Getting help</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing mutagen</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Gustavo Velásquez <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/gvelasq/mutagen/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/gvelasq/mutagen/actions/workflows/R-CMD-check.yaml/badge.svg?branch=main" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/gvelasq/mutagen" class="external-link"><img src="https://codecov.io/gh/gvelasq/mutagen/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://CRAN.R-project.org/package=mutagen" class="external-link"><img src="https://www.r-pkg.org/badges/version/mutagen" alt="CRAN status"></a></li>
<li><a href="https://gvelasq.r-universe.dev/mutagen" class="external-link"><img src="https://gvelasq.r-universe.dev/mutagen/badges/version" alt="mutagen status badge"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gustavo Velásquez.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
